/* ========================================
   PERFORMANCE OPTIMIZATIONS
   Mejoras de rendimiento general
   ======================================== */

/* ===== GPU ACCELERATION ===== */
/* Usar GPU para animaciones de transform y opacity */
.product-card,
.cart-notification,
.hero-slide,
.btn,
.action-btn,
.product-image,
.social-card-overlay {
  will-change: auto;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Solo activar will-change durante animaciones/interacciones */
.product-card:hover,
.btn:hover,
.action-btn:hover {
  will-change: transform, opacity;
}

/* Limpiar will-change después de la animación */
.product-card:not(:hover),
.btn:not(:hover),
.action-btn:not(:hover) {
  will-change: auto;
}

/* ===== CONTENIDO ABOVE THE FOLD ===== */
/* Optimizar elementos críticos del viewport inicial */
.hero-fullscreen,
.header,
.announcement-banner {
  content-visibility: auto;
}

/* ===== LAZY RENDERING ===== */
/* Renderizar solo lo visible en viewport */
.product-card,
.blog-card,
.social-card-overlay {
  content-visibility: auto;
  contain-intrinsic-size: 0 400px;
}

/* ===== FONT LOADING ===== */
/* Optimizar carga de fuentes */
@font-face {
  font-family: 'Bodoni Moda';
  font-display: swap;
}

@font-face {
  font-family: 'Roboto Flex';
  font-display: swap;
}

/* ===== IMAGE OPTIMIZATION ===== */
/* Optimizar rendering de imágenes */
img {
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

/* ===== SCROLL PERFORMANCE ===== */
/* Mejorar rendimiento de scroll */
.products-grid,
.cart-items-list,
.social-carousel-overlay {
  contain: layout style paint;
  overflow: hidden;
}

/* ===== REDUCE LAYOUT SHIFTS ===== */
/* Prevenir layout shifts (CLS) */
img,
video,
iframe {
  aspect-ratio: attr(width) / attr(height);
  height: auto;
}

/* Reservar espacio para elementos que cargan */
.image-skeleton,
.product-card-skeleton {
  min-height: 300px;
  background: linear-gradient(
    90deg,
    #f0f0f0 25%,
    #e0e0e0 50%,
    #f0f0f0 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* ===== CRITICAL CSS ===== */
/* Estilos críticos para above-the-fold */
.hero-fullscreen,
.header {
  position: relative;
  width: 100%;
  height: auto;
}

/* ===== OPTIMIZACIONES ESPECÍFICAS MOBILE ===== */
@media (max-width: 768px) {
  /* Reducir complejidad visual en mobile */
  * {
    text-shadow: none !important;
  }
  
  /* Simplificar gradientes costosos */
  .header,
  .footer {
    background: rgba(247, 202, 201, 0.95) !important;
    backdrop-filter: none !important;
  }
  
  /* Optimizar sombras */
  .product-card,
  .cart-notification,
  .btn {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
  }
  
  /* Desactivar hover effects en touch devices */
  @media (hover: none) and (pointer: coarse) {
    .product-card:hover,
    .btn:hover,
    *:hover {
      transform: none !important;
      filter: none !important;
    }
  }
}

/* ===== OPTIMIZAR ANIMACIONES ===== */
/* Solo animar transform y opacity (más eficiente) */
@media (prefers-reduced-motion: no-preference) {
  * {
    transition-property: transform, opacity, filter;
  }
}

/* ===== RESOURCE HINTS ===== */
/* Ayudar al navegador a priorizar recursos */
link[rel="preload"] {
  /* Cargar recursos críticos primero */
}

/* ===== INTERSECTION OBSERVER FALLBACK ===== */
/* Fallback para navegadores sin soporte */
@supports not (content-visibility: auto) {
  .product-card,
  .blog-card {
    /* Fallback para navegadores antiguos */
    display: block;
  }
}

/* ===== PAINT OPTIMIZATION ===== */
/* Reducir repaint en elementos complejos */
.product-grid,
.hero-slider,
.social-carousel-overlay {
  isolation: isolate;
}

/* ===== COMPOSITE LAYERS ===== */
/* Promover elementos animados a su propia capa */
.cart-notification,
.dropdown-menu,
.search-modal {
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
}

